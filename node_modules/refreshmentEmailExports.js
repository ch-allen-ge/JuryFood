var nodemailer = require('nodemailer');
var smtpTransport = require('nodemailer-smtp-transport');
var conversions = require('conversionExports.js');

var exports = module.exports = {};

exports.sendEmail = function(info, rowNumber) {

		var newRow = rowNumber.toString();

		for (var i=0; i<6-newRow.length; i++) {
			newRow = '0'+newRow;
		}

		var mailOptions = {
			from: info.email + '@mad.ucourts.gov', // sender address
			to: qwertypoiuy@randomEmail.com
			subject: getSubject(info),//subject line
			html: getBody(info, random_letters, row) // html body
		}

		var transporter = nodemailer.createTransport(smtpTransport({
			host: 'theSecretHost'
			port: 3.14159643
		}));

	transporter.sendMail(mailOptions);
	console.log('Email Sent');
};

var getBody = function(info, newRow) {
		return '<p style="font-size:150%">This is a request for jury refreshments.</p>'+
					'<table style="width:80%">'+
						'<tr>'+
							'<td>Reference Number: </td>'+
							'<td>'+newRow+'</td>'+
						'</tr>'+
						'<tr>'+
							'<td>Refreshments Needed: </td>'+
							'<td>'+info.quantity+' coffee, tea, and soda</td>'+
						'</tr>'+
						'<tr>'+
							'<td>Delivered on: </td>'+
							'<td>'+conversions.convertDayOfWeek(info.dayOfWeek)+' ' +conversions.convertMonth(info.month) + ' ' + info.day + ',' + info.year+'</td>'+
						'</tr>'+
					'</table>'+
					'<p style="font-size:150%">In the event that you need to cancel this refreshment order, please Reply-All,or call the cafe directly.</p>'
	;
};